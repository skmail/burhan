import { useEffect } from "react";
import useCommandStore from "../../store/commands/reducer";
import { useTransformStore } from "../../store/transform";
import { useWorkspaceStore } from "../../store/workspace/reducer";
import Button from "../Button";

export default function NodeTransform() {
  const canEnable = useCommandStore((state) => state.selected.length > 1);
  const toggle = useTransformStore((state) => state.toggle);
  const disable = useTransformStore((state) => state.disable);

  useEffect(() => {
    if (!canEnable) {
      disable();
    }
  }, [canEnable]);

  if (!canEnable) {
    return null;
  }

  return (
    <Button
      className="mt-4"
      onClick={(e) => {
        toggle();
        (e.target as HTMLButtonElement).blur();
        window.focus();
      }}
    >
      <svg
        className="w-6 h-6"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M12.35 13.9069C13.2099 13.9069 13.9069 13.2099 13.9069 12.35C13.9069 11.4901 13.2099 10.7931 12.35 10.7931C11.4901 10.7931 10.7931 11.4901 10.7931 12.35C10.7931 13.2099 11.4901 13.9069 12.35 13.9069ZM6.31552 5C5.58898 5 5 5.58898 5 6.31552V7.28103C5 7.88638 5.40887 8.39623 5.96552 8.54948L5.96552 16.1505C5.40887 16.3038 5 16.8136 5 17.419V18.3845C5 19.111 5.58898 19.7 6.31552 19.7H7.28103C7.88638 19.7 8.39623 19.2911 8.54948 18.7345H16.1505C16.3038 19.2911 16.8136 19.7 17.419 19.7H18.3845C19.111 19.7 19.7 19.111 19.7 18.3845V17.419C19.7 16.8136 19.2911 16.3038 18.7345 16.1505V8.54948C19.2911 8.39623 19.7 7.88638 19.7 7.28103V6.31552C19.7 5.58898 19.111 5 18.3845 5H17.419C16.8136 5 16.3038 5.40887 16.1505 5.96552L8.54948 5.96552C8.39623 5.40887 7.88638 5 7.28103 5H6.31552ZM6.31552 16.4534L6.31552 8.24653C5.78228 8.24653 5.35001 7.81425 5.35001 7.28101V6.31549C5.35001 6.2353 5.35978 6.1574 5.37821 6.0829C5.48231 5.66203 5.86248 5.35 6.31552 5.35H7.28103C7.81427 5.35 8.24655 5.78228 8.24655 6.31552H16.4534C16.4534 6.31551 16.4534 6.31553 16.4534 6.31552H8.24655C8.24655 5.78228 7.81427 5.35 7.28103 5.35H6.31552C5.86248 5.35 5.48231 5.66203 5.37821 6.0829C5.35978 6.1574 5.35001 6.2353 5.35001 6.31549V7.28101C5.35001 7.81425 5.78228 8.24653 6.31552 8.24653L6.31552 16.4534ZM8.24655 18.3845C8.24655 18.3845 8.24655 18.3845 8.24655 18.3845ZM19.35 18.3845C19.35 18.3844 19.35 18.3845 19.35 18.3845ZM19.35 7.28101C19.35 7.281 19.35 7.28102 19.35 7.28101ZM17.419 16.4534L17.419 8.24653C16.8857 8.24653 16.4535 7.81425 16.4535 7.28101H8.24656C8.24656 7.28102 8.24656 7.281 8.24656 7.28101H16.4535C16.4535 7.81425 16.8857 8.24653 17.419 8.24653L17.419 16.4534ZM16.4535 17.4189H8.24656C8.24656 16.8857 7.81428 16.4534 7.28104 16.4534V8.24655C7.28104 8.24655 7.28104 8.24655 7.28104 8.24655V16.4534C7.81428 16.4534 8.24656 16.8857 8.24656 17.4189H16.4535C16.4535 17.4189 16.4535 17.4189 16.4535 17.4189ZM17.069 8.54948C16.6238 8.42691 16.2731 8.07624 16.1505 7.63103H8.54948C8.42691 8.07624 8.07624 8.42691 7.63103 8.54948V16.1505C8.07624 16.2731 8.42691 16.6238 8.54948 17.069H16.1505C16.2731 16.6238 16.6238 16.2731 17.069 16.1505V8.54948ZM12.35 11.1431C13.0166 11.1431 13.5569 11.6834 13.5569 12.35C13.5569 12.35 13.5569 12.35 13.5569 12.35C13.5569 11.6834 13.0166 11.1431 12.35 11.1431Z"
          fill="currentColor"
        />
      </svg>
    </Button>
  );
}
